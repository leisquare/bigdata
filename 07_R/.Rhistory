#결측치를 대체하기(평균값, 중앙값)
x<-c(1,1,2,2,3,3,3,4,4,5,5,100)
mean(x)
median(x)
exam<-read.csv("inData/exma.csv",header=T)
exam<-read.csv("inData/exam.csv",header=T)
table(is.na(exam))
exam[c(3,8,15),'math']<-NA #인위적으로 결측치 넣기기
exam
apply(exam[3:5],2,mean)
apply(exam[3:5],2,mean,na.rm=T)
exam[c(3,8,15),'math']<-NA #인위적으로 math에 결측치 넣기
exam[1:2,'english']<-NA #인위적으로 english에 결측치 넣기
table(is.na(exam))
apply(exam[3:5],2,mean,na.rm=T)
tapply(exam)
tapply(exam[,3],exam$class,mean)
exam %>%
summarise(math=mean(math,na.rm = T),
english=mean(english,na.rm=T),
schence=mean(science,na.rm=T))
# 결측치들을 중앙값 대체
exam$matn
# 결측치들을 중앙값 대체
exam$math
exam$math<-ifelse(is.na(exam$math),median(exam$math,na.rm=T),exam$math)
exam$math #확인인
exam$english
exam$english<-ifelse(is.na(exam$english),median(exam$english,na.rm=T),exam$english)
exam$english
exam<-read.csv("inData/exam.csv",header=T)
exam
exam<-read.csv("inData/exam.csv",header=T)
exam[c(1,3,4),'math']<-NA
exam[c(1:2),'english']<-NA
exam[c(1),'science']<-NA
head(exam)
round(apply(exam[3:5],2,mean,na.rm=T)()
round(apply(exam[3:5],2,mean,na.rm=T))
round(apply(exam[3:5],2,mean,na.rm=T))
median<-round(apply(exam[3:5],2,mean,na.rm=T))
median
exam<-within(exam,{
math<-ifelse(is.na(math),median['math'],math)
english<-ifelse(is.na(english),median['english'],english)
science<-ifelse(is.na(science),median['science'],science)
})
table(is.na(exam))
colSums(is.na(exam))
exam[c(1,3,4),'math']<-NA
exam[c(1:2),'english']<-NA
exam[c(1),'science']<-NA
table(is.na(exam))
colSums(is.na(exam))
median<-round(apply(exam[3:5],2,mean,na.rm=T))
median['math']
median['english']
median['science']
exam<-within(exam,{
math<-ifelse(is.na(math),median['math'],math)
english<-ifelse(is.na(english),median['english'],english)
science<-ifelse(is.na(science),median['science'],science)
})
table(is.na(exam))
colSums(is.na(exam))
#결측치 대체 방법 2(dplyr패키지 이용)
colSums(is.na(exam))
exam[c(1,3,4),'math']<-NA
exam[c(1:2),'english']<-NA
exam[c(1),'science']<-NA
#결측치 대체 방법 2(dplyr패키지 이용)
colSums(is.na(exam))
median['math']
median['english']
median['science']
exam<-exam %>%
mutate(
math<-ifelse(is.na(math),median['math'],math),
english<-ifelse(is.na(english),median['english'],english),
science<-ifelse(is.na(science),median['science'],science)
)
colSums(is.na(exam))
colSums(is.na(exam))
head(exam.m)
exam<-read.csv("inData/exam.csv",header=T)
exam[c(1,3,4),'math']<-NA
exam[c(1:2),'english']<-NA
exam[c(1),'science']<-NA
#결측치 대체 방법 2(dplyr패키지 이용)
colSums(is.na(exam))
median['math']
median['english']
median['science']
exam.m<-exam %>%
mutate(
math<-ifelse(is.na(math),median['math'],math),
english<-ifelse(is.na(english),median['english'],english),
science<-ifelse(is.na(science),median['science'],science)
)
colSums(is.na(exam))
colSums(is.na(exam))
exam.m<-exam %>%
mutate(
math<-ifelse(is.na(math),median['math'],math),
english<-ifelse(is.na(english),median['english'],english),
science<-ifelse(is.na(science),median['science'],science)
)
colSums(is.na(exam))
colSums(is.na(exam.m))
colnames(exam.m<-'id','class','math','english','science')
colnames(exam.m<-'id','class','math','english','science')
head(exam.m)
exam<-read.csv("inData/exam.csv",header=T)
exam[c(1,3,4),'math']<-NA
exam[c(1:2),'english']<-NA
exam[c(1),'science']<-NA
#결측치 대체 방법 2(dplyr패키지 이용)
colSums(is.na(exam))
median['math']
median['english']
median['science']
exam.m<-exam %>%
mutate(
math=ifelse(is.na(math),median['math'],math),
english=ifelse(is.na(english),median['english'],english),
science=ifelse(is.na(science),median['science'],science)
)
colnames(exam.m<-'id','class','math','english','science')
exam<-read.csv("inData/exam.csv",header=T)
exam[c(1,3,4),'math']<-NA
exam[c(1:2),'english']<-NA
exam[c(1),'science']<-NA
#결측치 대체 방법 2(dplyr패키지 이용)
colSums(is.na(exam))
median['math']
median['english']
median['science']
exam<-exam %>%
mutate(
math=ifelse(is.na(math),median['math'],math),
english=ifelse(is.na(english),median['english'],english),
science=ifelse(is.na(science),median['science'],science)
)
colSums(is.na(exam.m))
head(exam.m)
ourlier<-data.frame(gebder=c(1,2,1,3,2),
score=c(90,95,100,99,101))
table(outlier$gender)
ourlier<-data.frame(gebder=c(1,2,1,3,2),
score=c(90,95,100,99,101))
table(outlier$gender)
ourlier<-data.frame(gender=c(1,2,1,3,2),
score=c(90,95,100,99,101))
table(outlier$gender)
outlier<-data.frame(gender=c(1,2,1,3,2),
score=c(90,95,100,99,101))
table(outlier$gender)
#gender 1은 남, 2는 여, 3은 이상치 처리
outlier$gender<-ifelse(outlier$gender!=1&&outlier$gender!=2,NA,outlier$gender)
#gender 1은 남, 2는 여, 3은 이상치 처리
outlier$gender<-ifelse(outlier$gender!=1 & outlier$gender!=2,NA,outlier$gender)
outlier
outlier<-data.frame(gender=c(1,2,1,3,2),
score=c(90,95,100,99,101))
outlier
#gender 1은 남, 2는 여, 3은 이상치 처리
outlier$gender<-ifelse((outlier$gender!=1 & outlier$gender!=2),NA,outlier$gender)
outlier
#gender 1은 남, 2는 여, 3은 이상치 처리
outlier$gender<-ifelse((outlier$gender!=1 & outlier$gender!=2),NA,outlier$gender)
outlier
#gender 1은 남, 2는 여, 3은 이상치 처리
outlier$gender<-ifelse((outlier$gender!=1 & outlier$gender!=2),NA,outlier$gender)
outlier
#score가 100 초과하는 경우 이상치 처리
outlier$score<-ifelse((outlier$score>100),NA,outlier$score)
outlier
# (2) 정상범위 기준으로 많이 벗어난 이상치: 상하위 0.3% 또는 평균+3*표준편차
mpg<-as.data.frame(ggplot2::mpg)
# (2) 정상범위 기준으로 많이 벗어난 이상치: 상하위 0.3% 또는 평균+3*표준편차
mpg<-as.data.frame(ggplot2::mpg)
mpg$hwy
mean(mpg$hwy)+*3(mpg$hwy)
mean(mpg$hwy)+3*sd(mpg$hwy)
mean(mpg$hwy)-3*sd(mpg$hwy)
boxpolot(mpg$hwy)
boxplot(mpg$hwy)
boxplot(mpg$hwy)$stats
result<-boxplot(mpg$hwy)$stats #박스플롯의 통계치.
result[1];result[5];
mpg$hwy<-ifelse(mpg$hwy>result[5]|mpg$hwy<result[1],NA,mpg$hwy)
tavle(is.na(mpg$hwy))
table(is.na(mpg$hwy))
head(mpg,2)
fuel(data.frame(fl=c('c','d','e','p','r'),
kind=c('cng','diesel','etanol E85','primium','reqular'),
price_fl=c(2.35,2.38,2.11,2.76,2.22)))
fuel<-data.frame(fl=c('c','d','e','p','r'),
kind=c('cng','diesel','etanol E85','primium','reqular'),
price_fl=c(2.35,2.38,2.11,2.76,2.22))
mpg <- as.data.frame(ggplot2::mpg) # mpg 데이터 불러오기
mpg[c(10, 14, 58, 93), "drv"] <- "k" # drv 이상치 할당
mpg[c(29, 43, 129, 203), "cty"] <- c(3, 4, 39, 42) # cty 이상치 할당
boxplot(mpg$cty)
left_join(mpg,fuel,by='fl')
#####(2) apply계열 함수 이용: tapply,by,summaryBy,aggregate
mpg[(mpg$displ<=4 | mpg$displ>= 5)]
mpg %>%
mutate(mpg_rank=ifelse(mpg$displ<=4,"displ<=4",ifelse(mpg$displ<5,"displ<5","displ>=5"))) %>%
filter(mpg_rank=="displ<=4"|mpg_rank=="displ>=5")%>%
group_by(mpg_rank) %>%
summarise(tot_mean1=mean(hwy))
#####(2) apply계열 함수 이용: tapply,by,summaryBy,aggregate
mpg[(mpg$displ<=4 | mpg$displ>= 5)]
tapply(auditoyota$cty,auditoyota$manufacturer,mean,simplify=F)
head(df)
df <- mpg[mpg$manufacturer %in% c("audi", "toyota"),]
df <- mpg[mpg$manufacturer %in% c("audi", "toyota"),]
df <- mpg[mpg$manufacturer %in% c("audi", "toyota"),]
df
#####(2) apply계열 함수 이용: tapply,by,summaryBy,aggregate
df <- mpg[(mpg$displ<=4 | mpg$displ>= 5),]
df$group <- ifelse(df$displ<=4, "배기량4이하", ifelse(df$displ>=5, "배기량5이상", NA))
head(df)
mpg %>%
mutate(mpg_rank=ifelse(mpg$displ<=4,"displ<=4",ifelse(mpg$displ<5,"displ<5","displ>=5"))) %>%
filter(mpg_rank=="displ<=4"|mpg_rank=="displ>=5")%>%
group_by(mpg_rank) %>%
summarise(tot_mean1=mean(hwy))
tapply(df$hwy, df$group, mean)
#####(2) apply계열 함수 이용: tapply,by,summaryBy,aggregate
df <- mpg[(mpg$displ<=4 | mpg$displ>= 5),]
df$group <- ifelse(df$displ<=4, "displ<=4하", ifelse(df$displ>=5, "displ>=5", NA))
tapply(df$hwy, df$group, mean)
cfh<-subset(mpg,manufacturer==c('chevrolet','ford','honda'))
tapply(cfh$hwy,cfh$manufacturer,mean)
######################################################
#혼자서 해보기 6 . mpg 데이터를 이용해서 분석 문제를 해결해보세요.
######################################################
table(mpf$drv)
######################################################
#혼자서 해보기 6 . mpg 데이터를 이용해서 분석 문제를 해결해보세요.
######################################################
table(mpf$drv)
######################################################
#혼자서 해보기 6 . mpg 데이터를 이용해서 분석 문제를 해결해보세요.
######################################################
table(mpg$drv)
mpg <- as.data.frame(ggplot2::mpg) # mpg 데이터 불러오기
mpg[c(10, 14, 58, 93), "drv"] <- "k" # drv 이상치 할당
mpg[c(29, 43, 129, 203), "cty"] <- c(3, 4, 39, 42) # cty 이상치 할당
boxplot(mpg$cty)
boxplot(mpg$cty)
#drv에 이상치가 있는지 확인하세요. 이상치를 결측 처리한 다음이상치가 사라졌는지 확인하세요.
# 결측 처리 할 때는 %in% 기호를 활용하세요.
is.na(mpg)
#drv에 이상치가 있는지 확인하세요. 이상치를 결측 처리한 다음이상치가 사라졌는지 확인하세요.
# 결측 처리 할 때는 %in% 기호를 활용하세요.
table(is.na(mpg))
#drv에 이상치가 있는지 확인하세요. 이상치를 결측 처리한 다음이상치가 사라졌는지 확인하세요.
# 결측 처리 할 때는 %in% 기호를 활용하세요.
table(is.na(mpg@drv))
#drv에 이상치가 있는지 확인하세요. 이상치를 결측 처리한 다음이상치가 사라졌는지 확인하세요.
# 결측 처리 할 때는 %in% 기호를 활용하세요.
table(is.na(mpg$drv))
mpg[c(10, 14, 58, 93), "drv"] <- "k" # drv 이상치 할당
#drv에 이상치가 있는지 확인하세요. 이상치를 결측 처리한 다음이상치가 사라졌는지 확인하세요.
# 결측 처리 할 때는 %in% 기호를 활용하세요.
is.na(mpg$drv)
mean(mpg$drv)+3*sd(mpg$drv)
mean(mpg$drv)-3*sd(mpg$drv)
str(drv)
str(mpg)
mpg$drv
mpg$drv<-ifelse((mpg$drv!=4 & outlier$gender!=F),NA,mpg$drv)
mpg$drv
######################################################
#혼자서 해보기 6 . mpg 데이터를 이용해서 분석 문제를 해결해보세요.
######################################################
table(mpg$drv)
mpg <- as.data.frame(ggplot2::mpg) # mpg 데이터 불러오기
mpg[c(10, 14, 58, 93), "drv"] <- "k" # drv 이상치 할당
mpg[c(29, 43, 129, 203), "cty"] <- c(3, 4, 39, 42) # cty 이상치 할당
boxplot(mpg$cty)
mpg$drv
mpg$drv<-ifelse((mpg$drv!=4 & outlier$gender!=f),NA,mpg$drv)
mpg$drv
mpg$drv<-ifelse((mpg$drv!=4 & outlier$gender!='f'),NA,mpg$drv)
mpg$drv<-ifelse((mpg$drv!=4 & mpg$drv!='f'),NA,mpg$drv)
mpg$drv
mpg <- as.data.frame(ggplot2::mpg) # mpg 데이터 불러오기
mpg[c(10, 14, 58, 93), "drv"] <- "k" # drv 이상치 할당
mpg[c(29, 43, 129, 203), "cty"] <- c(3, 4, 39, 42) # cty 이상치 할당
mpg$drv<-ifelse((mpg$drv!=4 & mpg$drv!=f),NA,mpg$drv)
mpg$drv
mpg$drv<-ifelse((mpg$drv!=4 & mpg$drv!=='f'),NA,mpg$drv)
mpg$drv<-ifelse((mpg$drv!='4' & mpg$drv!='f'),NA,mpg$drv)
mpg$drv
exam %>%
filter(class %in% c(1,2,3))
exam %>%
filter(class %in% -c(1,2,3))
exam %>%
filter(class %in% c(-1,2,3))
mpg <- as.data.frame(ggplot2::mpg) # mpg 데이터 불러오기
mpg[c(10, 14, 58, 93), "drv"] <- "k" # drv 이상치 할당
mpg[c(29, 43, 129, 203), "cty"] <- c(3, 4, 39, 42) # cty 이상치 할당
mpg$drv<-ifelse((mpg$drv %in% c(4,'f')),NA,mpg$drv)
mpg$drv
######################################################
#혼자서 해보기 6 . mpg 데이터를 이용해서 분석 문제를 해결해보세요.
######################################################
table(mpg$drv)
mpg <- as.data.frame(ggplot2::mpg) # mpg 데이터 불러오기
mpg[c(10, 14, 58, 93), "drv"] <- "k" # drv 이상치 할당
mpg[c(29, 43, 129, 203), "cty"] <- c(3, 4, 39, 42) # cty 이상치 할당
mpg$drv<-ifelse((mpg$drv %in% c(-4,-'f')),NA,mpg$drv)
mpg$drv
mpg$drv<-ifelse((mpg$drv %in% -c(4,'f')),NA,mpg$drv)
mpg$drv<-ifelse((mpg$drv %in% c(k)),NA,mpg$drv)
mpg$drv<-ifelse((mpg$drv %in% c('k')),NA,mpg$drv)
mpg$drv
result<-boxplot(mpg$drv)$stats
result<-boxplot(mpg$cty)$stats
result
#. 상자 그림을 이용해서 cty에 이상치가 있는지 확인하세요.
#상자그림의 통계치를 이용해 정상 범위를 벗어난 값을 결측 처리한 후 다시 상자 그림을 만들어 이상치가 사라졌는지 확인하세요.
boxplot(mpg$cty)
#. 상자 그림을 이용해서 cty에 이상치가 있는지 확인하세요.
#상자그림의 통계치를 이용해 정상 범위를 벗어난 값을 결측 처리한 후 다시 상자 그림을 만들어 이상치가 사라졌는지 확인하세요.
boxplot(mpg$cty)
mpg$hwy<-ifelse(mpg$hwy>result[5]|mpg$hwy<result[1],NA,mpg$hwy)
mpg %>%
group_by(drv,) %>%
exam %>%
filter(id%in%c(1:10)) %>%
select(english,math) %>%
arrange(english) %>%
head
mpg %>%
group_by(drv,)
mpg %>%
group_by(drv)
mpg %>%
group_by(drv,na.rm=F)
mpg %>%
group_by(drv)
mpg %>%
group_by(manufacturer)%>%
exam %>%
filter(id%in%c(1:10)) %>%
select(english,math) %>%
arrange(english) %>%
head
mpg %>%
group_by(manufacturer)
mpg %>%
group_by(drv)
mpg %>%
group_by(drv) %>%
summarise(cty_mean=mean(cty))
#. 상자 그림을 이용해서 cty에 이상치가 있는지 확인하세요.
#상자그림의 통계치를 이용해 정상 범위를 벗어난 값을 결측 처리한 후 다시 상자 그림을 만들어 이상치가 사라졌는지 확인하세요.
boxplot(mpg$cty)
#. 상자 그림을 이용해서 cty에 이상치가 있는지 확인하세요.
#상자그림의 통계치를 이용해 정상 범위를 벗어난 값을 결측 처리한 후 다시 상자 그림을 만들어 이상치가 사라졌는지 확인하세요.
boxplot(mpg$cty)
result<-boxplot(mpg$cty)$stats
result
mpg$hwy<-ifelse(mpg$hwy>result[5]|mpg$hwy<result[1],NA,mpg$hwy)
#. 상자 그림을 이용해서 cty에 이상치가 있는지 확인하세요.
#상자그림의 통계치를 이용해 정상 범위를 벗어난 값을 결측 처리한 후 다시 상자 그림을 만들어 이상치가 사라졌는지 확인하세요.
boxplot(mpg$cty)
######################################################
#혼자서 해보기 6 . mpg 데이터를 이용해서 분석 문제를 해결해보세요.
######################################################
table(mpg$drv)
mpg <- as.data.frame(ggplot2::mpg) # mpg 데이터 불러오기
mpg[c(10, 14, 58, 93), "drv"] <- "k" # drv 이상치 할당
mpg[c(29, 43, 129, 203), "cty"] <- c(3, 4, 39, 42) # cty 이상치 할당
boxplot(mpg$cty)
######################################################
#혼자서 해보기 6 . mpg 데이터를 이용해서 분석 문제를 해결해보세요.
######################################################
table(mpg$drv)
mpg <- as.data.frame(ggplot2::mpg) # mpg 데이터 불러오기
boxplot(mpg$cty)
mpg[c(10, 14, 58, 93), "drv"] <- "k" # drv 이상치 할당
mpg[c(29, 43, 129, 203), "cty"] <- c(3, 4, 39, 42) # cty 이상치 할당
boxplot(mpg$cty)
mpgdup
#Q1. mpg 데이터 복사본을 만들고, cty와 hwy를 더한 '합산 연비 변수'를 추가하세요.
#(1)
mpg %>%
mutate(합산연비변수 = cty+hwy) %>%
head
#Q2. 앞에서 만든 '합산 연비 변수'를 2로 나눠 '평균 연비 변수'를 추가세요
#(1)
mpg %>%
#Q2. 앞에서 만든 '합산 연비 변수'를 2로 나눠 '평균 연비 변수'를 추가세요
#(1)
mpg %>%
mutate(평균연비변수=합산연비변수/2) %>%
head
#Q2. 앞에서 만든 '합산 연비 변수'를 2로 나눠 '평균 연비 변수'를 추가세요
#(1)
mpg %>%
mutate(평균연비변수=합산연비변수/2) %>%
head
#Q2. 앞에서 만든 '합산 연비 변수'를 2로 나눠 '평균 연비 변수'를 추가세요
#(1)
mpg %>%
mutate(평균연비변수=합산연비변수/2) %>%
head
#Q2. 앞에서 만든 '합산 연비 변수'를 2로 나눠 '평균 연비 변수'를 추가세요
#(1)
mpg %>%
mutate('평균연비변수'='합산연비변수'/2) %>%
head
#Q2. 앞에서 만든 '합산 연비 변수'를 2로 나눠 '평균 연비 변수'를 추가세요
#(1)
mpg %>%
#Q2. 앞에서 만든 '합산 연비 변수'를 2로 나눠 '평균 연비 변수'를 추가세요
#(1)
mpg %>%
mutate(평균연비변수=(합산연비변수/2)) %>%
head
#Q2. 앞에서 만든 '합산 연비 변수'를 2로 나눠 '평균 연비 변수'를 추가세요
#(1)
mpg %>%
mutate(평균연비변수=(합산연비변수/2)) %>%
head
#Q1. mpg 데이터 복사본을 만들고, cty와 hwy를 더한 '합산 연비 변수'를 추가하세요.
#(1)
mpg %>%
mutate(합산연비변수 = cty+hwy) %>%
head
#Q1. mpg 데이터 복사본을 만들고, cty와 hwy를 더한 '합산 연비 변수'를 추가하세요.
#(1)
mpg %>%
mutate(totalv = cty+hwy) %>%
head
#Q1. mpg 데이터 복사본을 만들고, cty와 hwy를 더한 '합산 연비 변수'를 추가하세요.
#(1)
mpg %>%
mutate(totalv = cty+hwy) %>%
head
#Q2. 앞에서 만든 '합산 연비 변수'를 2로 나눠 '평균 연비 변수'를 추가세요
#(1)
mpg %>%
mutate(평균연비변수=(totalv/2)) %>%
head
#Q1. mpg 데이터 복사본을 만들고, cty와 hwy를 더한 '합산 연비 변수'를 추가하세요.
#(1)
mpg %>%
mutate(totalv = cty+hwy) %>%
head
mpg
#Q2. 앞에서 만든 '합산 연비 변수'를 2로 나눠 '평균 연비 변수'를 추가세요
#(1)
mpg %>%
mutate(평균연비변수=(cty+hwy/2)) %>%
head
#Q1. mpg 데이터 복사본을 만들고, cty와 hwy를 더한 '합산 연비 변수'를 추가하세요.
#(1)
mpg %>%
mutate(합산연비변수 = cty+hwy) %>%
head
#Q2. 앞에서 만든 '합산 연비 변수'를 2로 나눠 '평균 연비 변수'를 추가세요
#(1)
mpg %>%
mutate(합산연비변수 = cty+hwy,
평균연비변수=(합산연비변수/2)) %>%
head
#Q3. '평균 연비 변수'가 가장 높은 자동차 3종의 데이터를 출력하세요.
#(1)
mpg %>%
mutate(합산연비변수 = cty+hwy,
평균연비변수=(합산연비변수/2)) %>%
arrange(-평균연비변수) %>%
head(3)
#(2)
head(orderBy(~-평균연비변수,data=mpgdup),3)
######################################################
#분석 도전
######################################################
midwest_ <- as.data.frame(ggplot2::midwest)
youthpercent<-(poptotal-popadults)/poptotal
midwest_
youthpercent<-(midwest_$poptotal-midwest_$popadults)/midwest_$poptotal
youthpercent
youthpercent<-data.frame(youthpercent=(midwest_$poptotal-midwest_$popadults)/midwest_$poptotal,
county=midwest_$county)
youthpercent
left_join(midwest_,youthpercent,by='county')
midwest_
youthpercent<-data.frame(youthpercent=(midwest_$poptotal-midwest_$popadults)/midwest_$poptotal,
PID=midwest_$PID)
youthpercent
midwest_$poptotal-midwest_$popadults
######################################################
#분석 도전
######################################################
midwest_ <- as.data.frame(ggplot2::midwest)
midwest_
youthpercent<-data.frame(youthpercent=(midwest_$poptotal-midwest_$popadults)/midwest_$poptotal,
PID=midwest_$PID)
youthpercent
left_join(midwest_,youthpercent,by='PID')
midwest_
youthpercent
left_join(youthpercent,midwest_,by='PID')
